(this.webpackJsonpusers=this.webpackJsonpusers||[]).push([[0],{36:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){},47:function(e,t,n){},48:function(e,t,n){},49:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n.n(c),a=n(29),s=n.n(a),u=(n(36),n(37),n(8)),i=(n(38),n(23));n(50),n(40);i.a.initializeApp({apiKey:"AIzaSyCGKTH4910aybgUficfDwb-WNkVyeSy2NE",authDomain:"users-70792.firebaseapp.com",projectId:"users-70792",storageBucket:"users-70792.appspot.com",messagingSenderId:"162867986679",appId:"1:162867986679:web:28193220e9007bfcdf53f2"});var o=i.a.firestore(),j=i.a.auth(),l=o,b=n(5),d=n(14),O=n(2);function p(){var e=Object(c.useState)(""),t=Object(u.a)(e,2),n=t[0],r=t[1],a=Object(c.useRef)(),s=Object(c.useRef)(),i=Object(b.f)();return Object(O.jsxs)("div",{children:[Object(O.jsx)("h2",{children:"Log In"}),n&&Object(O.jsx)("p",{children:n}),Object(O.jsxs)("form",{onSubmit:function(e){e.preventDefault(),j.signInWithEmailAndPassword(a.current.value,s.current.value).then((function(e){e&&i.push("/")})).catch((function(){r("Failed to log in!")}))},className:"login__form",children:[Object(O.jsx)("input",{ref:a,type:"email",placeholder:"Enter email",required:!0}),Object(O.jsx)("input",{ref:s,type:"password",placeholder:"Enter password",required:!0}),Object(O.jsx)("button",{children:"Submit"})]}),Object(O.jsxs)("p",{children:["Need an account? ",Object(O.jsx)(d.b,{to:"/signup",children:"Sign Up"})]})]})}n(47);function f(){var e=Object(c.useState)(""),t=Object(u.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(!1),s=Object(u.a)(a,2),i=s[0],o=s[1],l=Object(c.useRef)(),p=Object(c.useRef)(),f=Object(c.useRef)(),h=Object(b.f)();return Object(O.jsxs)("div",{children:[Object(O.jsx)("h2",{children:"Sign Up"}),n&&Object(O.jsx)("p",{children:n}),Object(O.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),p.current.value!==f.current.value)return r("Passwords do not match");j.createUserWithEmailAndPassword(l.current.value,p.current.value).then((function(e){e&&!i&&h.push("/"),o(!1)})).catch((function(){r("Password should be at least 6 characters")}))},className:"signup__form",children:[Object(O.jsx)("input",{ref:l,type:"email",placeholder:"Enter email",required:!0}),Object(O.jsx)("input",{ref:p,type:"password",placeholder:"Enter password",required:!0}),Object(O.jsx)("input",{ref:f,type:"password",placeholder:"Confirm password",required:!0}),Object(O.jsx)("button",{children:"Submit"})]}),Object(O.jsxs)("p",{children:["Already have an account? ",Object(O.jsx)(d.b,{to:"/login",children:"Log In"})]})]})}var h=n(20),m=n(17);n(48);function x(){var e=Object(c.useState)([]),t=Object(u.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)([]),s=Object(u.a)(a,2),i=s[0],o=s[1],d=Object(c.useState)(""),p=Object(u.a)(d,2),f=p[0],x=p[1],v=Object(c.useState)(""),g=Object(u.a)(v,2),S=g[0],y=g[1],w=Object(c.useState)(""),C=Object(u.a)(w,2),_=C[0],N=C[1],q=Object(c.useState)(""),E=Object(u.a)(q,2),k=E[0],I=E[1],U=Object(c.useState)(""),A=Object(u.a)(U,2),D=A[0],R=A[1],L=Object(c.useState)(""),P=Object(u.a)(L,2),B=(P[0],P[1]),W=Object(c.useState)(""),z=Object(u.a)(W,2),J=z[0],K=z[1],F=Object(c.useState)(),G=Object(u.a)(F,2),H=G[0],M=G[1],T=Object(b.f)();Object(c.useEffect)((function(){l.collection("users").onSnapshot((function(e){return r(e.docs.map((function(e){return Object(m.a)(Object(m.a)({},e.data()),{},{id:e.id})})))})),l.collection("states").onSnapshot((function(e){return o(e.docs.map((function(e){return e.data()})))}))}),[r,o]);var V=function(e){return Object(h.a)(n).filter((function(t){return Object.keys(t).some((function(n){return t[n]===e}))})).map((function(e){return[e.name,e.surname,e.username,e.password,e.oib,e.state,e.id]})).flat()},Q=function(e){var t=V(e),n=Object(h.a)(i).filter((function(e){return Object.keys(e).some((function(n){return e[n]===t[5][1]}))})),c=n[0].code,r=n[0].name;K("".concat(c,"-").concat(r))};return Object(O.jsxs)("div",{className:"home__container",children:[Object(O.jsxs)("div",{className:"home__top",children:[Object(O.jsxs)("p",{children:["User: ",j.currentUser.email]}),Object(O.jsx)("button",{onClick:function(){return j.signOut().then((function(){T.push("/login")}))},children:"Log Out"})]}),Object(O.jsxs)("form",{className:"home__form",onSubmit:function(e){e.preventDefault();var t=[f,S,_,k,D],c=Object(h.a)(n).map((function(e){return Object.values(e)})).flat();t.every((function(e){return!c.includes(e)}))?l.collection("users").add({name:f,surname:S,username:_,password:k,oib:D,state:J.split("-")}):l.collection("users").doc(H).update({name:f,surname:S,username:_,password:k,oib:D,state:J.split("-")}),x(""),y(""),N(""),I(""),R("")},children:[Object(O.jsx)("input",{type:"text",placeholder:"name",required:!0,value:f,onChange:function(e){return x(e.target.value)}}),Object(O.jsx)("input",{type:"text",placeholder:"surname",required:!0,value:S,onChange:function(e){return y(e.target.value)}}),Object(O.jsx)("input",{type:"text",placeholder:"username",required:!0,value:_,onChange:function(e){return N(e.target.value)}}),Object(O.jsx)("input",{type:"password",placeholder:"password",required:!0,value:k,onChange:function(e){return I(e.target.value)}}),Object(O.jsx)("input",{type:"tel",placeholder:"OIB",pattern:"[0-9]{11}",maxLength:"11",required:!0,value:D,onChange:function(e){return R(e.target.value)}}),Object(O.jsx)("select",{value:J,onChange:function(e){return K(e.target.value)},children:i.map((function(e,t){return Object(O.jsx)("option",{children:"".concat(e.code,"-").concat(e.name)},t)}))}),Object(O.jsxs)("div",{children:[Object(O.jsx)("button",{children:"Save"}),Object(O.jsx)("button",{onClick:function(){l.collection("users").doc(H).delete(),x(""),y(""),N(""),I(""),R("")},children:"Delete"})]})]}),Object(O.jsxs)("section",{className:"home__grid",children:[Object(O.jsx)("div",{children:Object(O.jsx)("strong",{children:"Name"})}),Object(O.jsx)("div",{children:Object(O.jsx)("strong",{children:"Surname"})}),Object(O.jsx)("div",{children:Object(O.jsx)("strong",{children:"Username"})}),Object(O.jsx)("div",{children:Object(O.jsx)("strong",{children:"State"})}),Object(h.a)(n).map((function(e){return[e.name,e.surname,e.username,e.state[1]]})).flat().map((function(e,t){return Object(O.jsx)("div",{onClick:function(){return function(e){var t=V(e);x(t[0]),y(t[1]),N(t[2]),I(t[3]),R(t[4]),B(t[5]),M(t[6]),Q(e)}(e)},children:e},t)}))]})]})}var v=n(31);function g(e){var t=e.component,n=Object(v.a)(e,["component"]),r=Object(b.f)();return Object(c.useEffect)((function(){j.onAuthStateChanged((function(e){e?r.push("/"):r.push("/signup")}))}),[]),Object(O.jsx)(b.a,Object(m.a)(Object(m.a)({},n),{},{render:function(e){return j.currentUser&&Object(O.jsx)(t,Object(m.a)({},e))}}))}var S=function(){return Object(O.jsx)("div",{className:"App",children:Object(O.jsx)(d.a,{children:Object(O.jsxs)(b.c,{children:[Object(O.jsx)(g,{exact:!0,path:"/",component:x}),Object(O.jsx)(b.a,{path:"/login",component:p}),Object(O.jsx)(b.a,{path:"/signup",component:f})]})})})};s.a.render(Object(O.jsx)(r.a.StrictMode,{children:Object(O.jsx)(S,{})}),document.getElementById("root"))}},[[49,1,2]]]);
//# sourceMappingURL=main.8e8139bd.chunk.js.map